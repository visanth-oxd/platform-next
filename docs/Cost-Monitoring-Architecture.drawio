<mxfile host="app.diagrams.net" modified="2025-11-16T00:00:00.000Z" agent="5.0" version="21.6.5" etag="cost-monitoring-v1" type="device">
  <diagram name="Cost Monitoring Architecture" id="cost-monitoring-arch">
    <mxGraphModel dx="2000" dy="1600" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2000" pageHeight="1800" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="Cost Monitoring Architecture: Budget Creation &amp; Cost Tracking" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#1a237e" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="1200" height="40" as="geometry" />
        </mxCell>
        
        <!-- Business Context -->
        <mxCell id="business-context" value="Business Context:&#xa;â€¢ Business Unit: core-banking&#xa;â€¢ Cost Center: COR-B&#xa;â€¢ Owner: owner@company.com" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1650" y="20" width="300" height="60" as="geometry" />
        </mxCell>
        
        <!-- Layer 1: Service Onboarding -->
        <mxCell id="layer1-title" value="LAYER 1: SERVICE ONBOARDING" style="text;html=1;strokeColor=none;fillColor=#dae8fc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="50" y="100" width="300" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="developer" value="Developer" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="80" y="150" width="40" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="backstage-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;strokeWidth=2;dashed=1;dashPattern=8 8;" vertex="1" parent="1">
          <mxGeometry x="200" y="140" width="400" height="220" as="geometry" />
        </mxCell>
        
        <mxCell id="backstage-title" value="Backstage Developer Portal" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="220" y="150" width="360" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="backstage-form" value="Service Onboarding Form" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="220" y="190" width="170" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="backstage-cost-config" value="Cost Configuration:&#xa;â€¢ Cost Profile: standard-api-cost&#xa;â€¢ Service Size: large (multiplier: 2.0Ã—)&#xa;â€¢ Cost Center: COR-B&#xa;â€¢ Business Unit: core-banking&#xa;â€¢ Owner: owner@company.com" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#2e7d32;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="220" y="250" width="360" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="backstage-budget-preview" value="Budget Preview (Formula: base Ã— scaling Ã— size):&#xa;â€¢ Int-Stable: $500 Ã— 1.0 Ã— 2.0 = $1,000/month&#xa;â€¢ Pre-Stable: $1,500 Ã— 1.33 Ã— 2.0 = $3,000/month&#xa;â€¢ Production: $3,000 Ã— 1.67 Ã— 2.0 = $6,000/month" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="220" y="360" width="360" height="80" as="geometry" />
        </mxCell>
        
        <!-- Arrow: Developer to Backstage -->
        <mxCell id="arrow-dev-backstage" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;entryX=0;entryY=0.5;" edge="1" parent="1" source="developer" target="backstage-container">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="600" y="400" as="sourcePoint" />
            <mxPoint x="650" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Layer 2: Configuration Repository -->
        <mxCell id="layer2-title" value="LAYER 2: CONFIGURATION REPOSITORY" style="text;html=1;strokeColor=none;fillColor=#dae8fc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="50" y="400" width="400" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="repo-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;strokeWidth=2;dashed=1;dashPattern=8 8;" vertex="1" parent="1">
          <mxGeometry x="50" y="440" width="550" height="280" as="geometry" />
        </mxCell>
        
        <mxCell id="repo-title" value="Repository: platform-next (GitHub)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="70" y="450" width="510" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="catalog-services" value="catalog/services.yaml&#xa;â€¢ Service definitions&#xa;â€¢ size: large (multiplier: 2.0Ã—)&#xa;â€¢ costProfile: standard-api-cost&#xa;â€¢ cost.costCenter: COR-B&#xa;â€¢ cost.businessUnit: core-banking&#xa;â€¢ cost.costOwner: owner@company.com" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="70" y="490" width="250" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="cost-profiles" value="cost-profiles.yaml&#xa;â€¢ standard-api-cost profile&#xa;â€¢ Budget templates&#xa;â€¢ Alert configurations" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#2e7d32;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="340" y="490" width="250" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="cost-profile-details" value="standard-api-cost:&#xa;  budgets:&#xa;    int-stable: base: 500, scaling: 1.0&#xa;    pre-stable: base: 1500, scaling: 1.33&#xa;    prod: base: 3000, scaling: 1.67&#xa;  alerts:&#xa;    - threshold: 80% â†’ Teams, Email&#xa;    - threshold: 100% â†’ Teams, Email&#xa;&#xa;Size Multipliers:&#xa;  small: 0.3Ã—, medium: 1.0Ã—, large: 2.0Ã—,&#xa;  xlarge: 3.5Ã—, xxlarge: 6.0Ã—" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="70" y="630" width="520" height="80" as="geometry" />
        </mxCell>
        
        <!-- Arrow: Backstage to Repo -->
        <mxCell id="arrow-backstage-repo" value="1. Create Catalog Entry" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;entryX=0.5;entryY=0;exitDx=0;exitDy=0;entryDx=0;entryDy=0;strokeWidth=3;strokeColor=#00cc66;fontSize=11;fontStyle=1" edge="1" parent="1" source="backstage-container" target="repo-container">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="500" as="sourcePoint" />
            <mxPoint x="450" y="450" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Layer 3: CI/CD Pipeline -->
        <mxCell id="layer3-title" value="LAYER 3: CI/CD PIPELINE" style="text;html=1;strokeColor=none;fillColor=#dae8fc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="50" y="760" width="300" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="cicd-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;strokeWidth=2;dashed=1;dashPattern=8 8;" vertex="1" parent="1">
          <mxGeometry x="50" y="800" width="950" height="200" as="geometry" />
        </mxCell>
        
        <mxCell id="cicd-title" value="CI/CD Pipeline (GitHub Actions)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="70" y="810" width="910" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="cicd-step1" value="Step 1: Cost Profile Expansion&#xa;â€¢ Load cost profile&#xa;â€¢ Get service size (large = 2.0Ã—)&#xa;â€¢ Formula: base Ã— scaling Ã— size-multiplier&#xa;â€¢ Apply service-level overrides (if any)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#2e7d32;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="70" y="850" width="220" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="cicd-step2" value="Step 2: Variable Substitution&#xa;â€¢ {SERVICE} â†’ payment-processor&#xa;â€¢ {COST_CENTER} â†’ COR-B&#xa;â€¢ {OWNER} â†’ owner@company.com&#xa;â€¢ {BUSINESS_UNIT} â†’ core-banking&#xa;â€¢ {SIZE} â†’ large (2.0Ã—)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="310" y="850" width="220" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="cicd-step3" value="Step 3: Budget Calculation&#xa;Formula: base Ã— scaling Ã— size&#xa;â€¢ Int-Stable: $500 Ã— 1.0 Ã— 2.0 = $1,000&#xa;â€¢ Pre-Stable: $1,500 Ã— 1.33 Ã— 2.0 = $3,000&#xa;â€¢ Prod: $3,000 Ã— 1.67 Ã— 2.0 = $6,000&#xa;Note: Service overrides applied after" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#2e7d32;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="550" y="850" width="220" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="cicd-step4" value="Step 4: Generate Manifests&#xa;â€¢ Inject cost labels into commonLabels&#xa;â€¢ All resources tagged with:&#xa;  - cost.service&#xa;  - cost.costCenter: COR-B&#xa;  - cost.businessUnit: core-banking" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="790" y="850" width="200" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="cicd-output" value="Output: expanded-cost.json&#xa;  budgets: {int: $1K, pre: $3K, prod: $6K}&#xa;  labels: {costCenter: COR-B, owner: owner@company.com}&#xa;  alerts: {80%, 100%}" style="text;html=1;strokeColor=none;fillColor=#f3e5f5;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=11;fontStyle=1;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="70" y="950" width="920" height="30" as="geometry" />
        </mxCell>
        
        <!-- Arrow: Repo to CI/CD -->
        <mxCell id="arrow-repo-cicd" value="2. Trigger CI/CD" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;entryX=0.5;entryY=0;exitDx=0;exitDy=0;entryDx=0;entryDy=0;strokeWidth=3;strokeColor=#ff9900;fontSize=11;fontStyle=1" edge="1" parent="1" source="repo-container" target="cicd-container">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="325" y="800" as="sourcePoint" />
            <mxPoint x="375" y="750" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Layer 4: Budget Creation (Apptio Sync) -->
        <mxCell id="layer4-title" value="LAYER 4: BUDGET CREATION (Apptio Sync)" style="text;html=1;strokeColor=none;fillColor=#dae8fc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1050" y="400" width="400" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="apptio-sync-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#2e7d32;strokeWidth=2;dashed=1;dashPattern=8 8;" vertex="1" parent="1">
          <mxGeometry x="1050" y="440" width="550" height="280" as="geometry" />
        </mxCell>
        
        <mxCell id="apptio-sync-title" value="Apptio Sync Service" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1070" y="450" width="510" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="apptio-sync-trigger" value="Trigger: Deployment Successful&#xa;(Webhook from Harness)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1070" y="490" width="250" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="apptio-sync-actions" value="Actions:&#xa;â€¢ Load service from catalog&#xa;â€¢ Expand cost profile&#xa;â€¢ Create budgets in Apptio&#xa;â€¢ Configure alert rules&#xa;â€¢ Setup notification channels" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#2e7d32;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1340" y="490" width="240" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="apptio-budgets" value="Budgets Created in Apptio:&#xa;â€¢ payment-processor-int-stable: $1,000/month&#xa;â€¢ payment-processor-pre-stable: $3,000/month&#xa;â€¢ payment-processor-prod: $6,000/month" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="1070" y="600" width="510" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="apptio-alerts" value="Alert Rules Configured:&#xa;â€¢ 80% threshold â†’ Teams (#team-payment-processor) + Email (owner@company.com)&#xa;â€¢ 100% threshold â†’ Teams (#team-payment-processor, #platform-leadership) + Email (owner@company.com)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="1070" y="670" width="510" height="40" as="geometry" />
        </mxCell>
        
        <!-- Layer 5: Deployment -->
        <mxCell id="layer5-title" value="LAYER 5: DEPLOYMENT" style="text;html=1;strokeColor=none;fillColor=#dae8fc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="50" y="1040" width="300" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="harness-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;strokeWidth=2;dashed=1;dashPattern=8 8;" vertex="1" parent="1">
          <mxGeometry x="50" y="1080" width="300" height="180" as="geometry" />
        </mxCell>
        
        <mxCell id="harness-title" value="Harness CD" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="70" y="1090" width="260" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="harness-fetch" value="Fetch Manifests&#xa;from Git" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="70" y="1130" width="120" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="harness-deploy" value="Deploy to K8s&#xa;Cluster" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="210" y="1130" width="120" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="harness-success" value="âœ… Deployment Successful&#xa;â†’ Triggers Apptio Sync" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="70" y="1200" width="260" height="40" as="geometry" />
        </mxCell>
        
        <!-- Kubernetes Cluster -->
        <mxCell id="k8s-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e6f2ff;strokeColor=#0066cc;strokeWidth=2;dashed=1;dashPattern=8 8;" vertex="1" parent="1">
          <mxGeometry x="400" y="1080" width="600" height="180" as="geometry" />
        </mxCell>
        
        <mxCell id="k8s-title" value="Kubernetes Cluster (prod-euw1)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="420" y="1090" width="560" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="k8s-namespace" value="Namespace: prod-payment-processor-euw1-stable" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="420" y="1130" width="280" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="k8s-pod" value="Pod: payment-processor&#xa;â€¢ Labels: app, cost.service, cost.costCenter=COR-B&#xa;â€¢ cost.businessUnit=core-banking&#xa;â€¢ cost.owner=owner@company.com&#xa;â€¢ cost.budget=&quot;6000&quot;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="720" y="1130" width="260" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="k8s-cost-labels" value="âœ… Cost Labels Active&#xa;All resources tagged for cost tracking" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#2e7d32;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="420" y="1180" width="560" height="40" as="geometry" />
        </mxCell>
        
        <!-- Arrow: CI/CD to Harness -->
        <mxCell id="arrow-cicd-harness" value="3. Manifests Ready" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;entryX=0.5;entryY=0;exitDx=0;exitDy=0;entryDx=0;entryDy=0;strokeWidth=3;strokeColor=#0099cc;fontSize=11;fontStyle=1;dashed=1" edge="1" parent="1" source="cicd-container" target="harness-container">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="525" y="1100" as="sourcePoint" />
            <mxPoint x="575" y="1050" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Arrow: Harness to K8s -->
        <mxCell id="arrow-harness-k8s" value="4. Deploy" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;entryX=0;entryY=0.5;exitDx=0;exitDy=0;entryDx=0;entryDy=0;strokeWidth=3;strokeColor=#009900;fontSize=11;fontStyle=1" edge="1" parent="1" source="harness-container" target="k8s-container">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="1170" as="sourcePoint" />
            <mxPoint x="450" y="1120" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Arrow: Deployment Success to Apptio Sync -->
        <mxCell id="arrow-deploy-apptio" value="5. Trigger Apptio Sync&#xa;(Deployment Successful)" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;entryX=0;entryY=0.5;exitDx=0;exitDy=0;entryDx=0;entryDy=0;strokeWidth=3;strokeColor=#2e7d32;fontSize=11;fontStyle=1" edge="1" parent="1" source="k8s-container" target="apptio-sync-container">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1100" y="1170" as="sourcePoint" />
            <mxPoint x="1150" y="1120" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Layer 6: Cost Tracking -->
        <mxCell id="layer6-title" value="LAYER 6: COST TRACKING (Runtime)" style="text;html=1;strokeColor=none;fillColor=#dae8fc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="50" y="1300" width="400" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="gcp-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e3f2fd;strokeColor=#1976d2;strokeWidth=2;dashed=1;dashPattern=8 8;" vertex="1" parent="1">
          <mxGeometry x="50" y="1340" width="300" height="200" as="geometry" />
        </mxCell>
        
        <mxCell id="gcp-title" value="GCP Billing Export" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="70" y="1350" width="260" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="gcp-daily-export" value="Daily Export (T+24 hours):&#xa;â€¢ Includes all cost labels&#xa;â€¢ Per-resource breakdown&#xa;â€¢ Aggregated by labels" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="70" y="1390" width="260" height="70" as="geometry" />
        </mxCell>
        
        <mxCell id="gcp-labeled-costs" value="Labeled Costs:&#xa;cost.service=payment-processor&#xa;cost.costCenter=COR-B&#xa;cost.environment=prod&#xa;â†’ $XXX/day" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="70" y="1470" width="260" height="60" as="geometry" />
        </mxCell>
        
        <!-- Apptio Platform -->
        <mxCell id="apptio-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#2e7d32;strokeWidth=2;dashed=1;dashPattern=8 8;" vertex="1" parent="1">
          <mxGeometry x="400" y="1340" width="400" height="200" as="geometry" />
        </mxCell>
        
        <mxCell id="apptio-title" value="Apptio Platform (SaaS)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="420" y="1350" width="360" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="apptio-ingestion" value="Cost Ingestion (T+48 hours):&#xa;â€¢ Reads labeled costs from GCP&#xa;â€¢ Allocates to service/budget&#xa;â€¢ Matches with budget: $6,000/month" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#2e7d32;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="420" y="1390" width="360" height="70" as="geometry" />
        </mxCell>
        
        <mxCell id="apptio-tracking" value="Cost Tracking:&#xa;â€¢ Month-to-date: $XXX&#xa;â€¢ Budget: $6,000&#xa;â€¢ % Used: XX%&#xa;â€¢ Status: âœ… Healthy / âš ï¸ Warning / âŒ Critical" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="420" y="1470" width="360" height="60" as="geometry" />
        </mxCell>
        
        <!-- Cost Visibility -->
        <mxCell id="visibility-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2;dashed=1;dashPattern=8 8;" vertex="1" parent="1">
          <mxGeometry x="850" y="1340" width="400" height="200" as="geometry" />
        </mxCell>
        
        <mxCell id="visibility-title" value="Cost Visibility" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="870" y="1350" width="360" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="visibility-dashboards" value="Dashboards:&#xa;â€¢ Apptio dashboards&#xa;â€¢ Backstage cost plugin&#xa;â€¢ Budget vs actual&#xa;â€¢ Cost trends" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="870" y="1390" width="180" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="visibility-reports" value="Reports:&#xa;â€¢ Daily cost reports&#xa;â€¢ Monthly summaries&#xa;â€¢ Cost center allocation&#xa;â€¢ Team notifications" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1070" y="1390" width="160" height="80" as="geometry" />
        </mxCell>
        
        <!-- Alert System -->
        <mxCell id="alert-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffebee;strokeColor=#c62828;strokeWidth=2;dashed=1;dashPattern=8 8;" vertex="1" parent="1">
          <mxGeometry x="1300" y="1340" width="300" height="200" as="geometry" />
        </mxCell>
        
        <mxCell id="alert-title" value="Alert System" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1320" y="1350" width="260" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="alert-80" value="80% Threshold ($4,800):&#xa;âš ï¸ Warning Alert&#xa;â€¢ Teams: #team-payment-processor&#xa;â€¢ Email: owner@company.com" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff3cd;strokeColor=#ffc107;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1320" y="1390" width="260" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="alert-100" value="100% Threshold ($6,000):&#xa;âŒ Critical Alert&#xa;â€¢ Teams: #team-payment-processor, #platform-leadership&#xa;â€¢ Email: owner@company.com" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1320" y="1460" width="260" height="60" as="geometry" />
        </mxCell>
        
        <!-- Arrow: GCP to Apptio -->
        <mxCell id="arrow-gcp-apptio" value="6. Ingest Costs&#xa;(T+48 hours)" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;entryX=0;entryY=0.5;exitDx=0;exitDy=0;entryDx=0;entryDy=0;strokeWidth=3;strokeColor=#1976d2;fontSize=11;fontStyle=1" edge="1" parent="1" source="gcp-container" target="apptio-container">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="1440" as="sourcePoint" />
            <mxPoint x="450" y="1390" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Arrow: Apptio to Visibility -->
        <mxCell id="arrow-apptio-visibility" value="7. Cost Data" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;entryX=0;entryY=0.5;exitDx=0;exitDy=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#2e7d32;fontSize=11;fontStyle=1" edge="1" parent="1" source="apptio-container" target="visibility-container">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="850" y="1440" as="sourcePoint" />
            <mxPoint x="900" y="1390" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Arrow: Apptio to Alerts -->
        <mxCell id="arrow-apptio-alerts" value="8. Alerts Fire" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;entryX=0;entryY=0.5;exitDx=0;exitDy=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#c62828;fontSize=11;fontStyle=1" edge="1" parent="1" source="apptio-container" target="alert-container">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="850" y="1440" as="sourcePoint" />
            <mxPoint x="900" y="1390" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Cost Tracking Timeline -->
        <mxCell id="timeline-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="50" y="1580" width="1550" height="180" as="geometry" />
        </mxCell>
        
        <mxCell id="timeline-title" value="Cost Tracking Timeline" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="70" y="1590" width="1510" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="timeline-t0" value="T+0 hours:&#xa;Service Deployed&#xa;âœ… Pods running with cost labels" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="70" y="1640" width="200" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="timeline-t1" value="T+1 hour:&#xa;Apptio Sync Triggered&#xa;âœ… Budgets created in Apptio" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#2e7d32;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="290" y="1640" width="200" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="timeline-t24" value="T+24 hours:&#xa;GCP Billing Export&#xa;âœ… Labeled costs exported" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e3f2fd;strokeColor=#1976d2;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="510" y="1640" width="200" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="timeline-t48" value="T+48 hours:&#xa;Apptio Ingestion&#xa;âœ… Costs ingested and tracked" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#2e7d32;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="730" y="1640" width="200" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="timeline-t72" value="T+72 hours:&#xa;First Cost Data Visible&#xa;âœ… Dashboard shows actual costs" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="950" y="1640" width="200" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="timeline-ongoing" value="T+3+ days:&#xa;Ongoing Tracking&#xa;âœ… Daily cost updates&#xa;âœ… Alerts fire at thresholds" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1170" y="1640" width="200" height="80" as="geometry" />
        </mxCell>
        
        <!-- Key Points Box -->
        <mxCell id="key-points-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d4edda;strokeColor=#28a745;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1650" y="440" width="300" height="280" as="geometry" />
        </mxCell>
        
        <mxCell id="key-points-title" value="âœ… Key Points" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#28a745" vertex="1" parent="1">
          <mxGeometry x="1670" y="450" width="260" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="key-points-content" value="ðŸ’° Budget Formula:&#xa;â€¢ base Ã— scaling Ã— size-multiplier&#xa;â€¢ Size multipliers:&#xa;  small: 0.3Ã—, medium: 1.0Ã—,&#xa;  large: 2.0Ã—, xlarge: 3.5Ã—,&#xa;  xxlarge: 6.0Ã—&#xa;â€¢ Service overrides: budgetMultiplier&#xa;&#xa;ðŸ“Š Budget Creation:&#xa;â€¢ Happens AFTER deployment&#xa;â€¢ Triggered by deployment success&#xa;â€¢ Creates budgets in Apptio&#xa;&#xa;âš ï¸ Cost Tracking:&#xa;â€¢ Starts when pods running&#xa;â€¢ GCP exports labeled costs (daily)&#xa;â€¢ Apptio ingests and compares" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1680" y="490" width="240" height="230" as="geometry" />
        </mxCell>
        
        <!-- Data Flow Summary -->
        <mxCell id="flow-summary" value="Complete Cost Management Flow:&#xa;&#xa;ðŸ“‹ PLANNING PHASE (Before Deployment):&#xa;1. Developer â†’ Backstage (form: size=large, cost profile, COR-B)&#xa;2. Backstage â†’ Catalog PR (services.yaml with size, cost metadata)&#xa;3. CI/CD â†’ Cost Profile Expansion&#xa;   â€¢ Formula: base Ã— scaling Ã— size-multiplier&#xa;   â€¢ Example: $500 Ã— 1.0 Ã— 2.0 = $1,000 (int-stable)&#xa;   â€¢ Apply service overrides (budgetMultiplier) if any&#xa;4. CI/CD â†’ Manifest Generation (inject cost labels)&#xa;5. CI/CD â†’ Git Commit (generated/manifests.yaml)&#xa;&#xa;ðŸš€ DEPLOYMENT PHASE:&#xa;6. Harness â†’ Fetch Manifests (from Git)&#xa;7. Harness â†’ Deploy (with cost labels: COR-B, core-banking)&#xa;8. Deployment Successful â†’ Apptio Sync Triggered&#xa;   â€¢ Create budgets in Apptio ($1K, $3K, $6K)&#xa;   â€¢ Configure alert rules (80%, 100%)&#xa;   â€¢ Setup notification channels (Teams, Email)&#xa;&#xa;ðŸ’° RUNTIME PHASE (After Deployment):&#xa;9. Runtime â†’ Cost Tracking Starts (GCP â†’ Apptio)&#xa;   â€¢ Pods running with cost labels (COR-B)&#xa;   â€¢ GCP billing exports labeled costs (daily)&#xa;   â€¢ Apptio ingests and compares vs budget&#xa;10. Runtime â†’ Cost Visibility&#xa;    â€¢ Apptio dashboards show actual costs&#xa;    â€¢ Alerts fire at thresholds (80%, 100%)&#xa;    â€¢ Teams/Email notifications sent" style="text;html=1;strokeColor=#666666;fillColor=#f5f5f5;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=11;fontStyle=1;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="1650" y="760" width="300" height="420" as="geometry" />
        </mxCell>
        
        <!-- Legend -->
        <mxCell id="legend-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=1;dashed=1;dashPattern=8 8;" vertex="1" parent="1">
          <mxGeometry x="1050" y="760" width="550" height="200" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-title" value="Legend" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1070" y="770" width="510" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-cost" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#2e7d32;" vertex="1" parent="1">
          <mxGeometry x="1080" y="810" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-cost-text" value="Cost Management Components" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1120" y="805" width="480" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-deployment" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="1080" y="850" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-deployment-text" value="Deployment Components" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1120" y="845" width="480" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-runtime" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e6f2ff;strokeColor=#0066cc;" vertex="1" parent="1">
          <mxGeometry x="1080" y="890" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-runtime-text" value="Runtime Components" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1120" y="885" width="480" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-alert" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffebee;strokeColor=#c62828;" vertex="1" parent="1">
          <mxGeometry x="1080" y="930" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-alert-text" value="Alert Components" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1120" y="925" width="480" height="30" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>

